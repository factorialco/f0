import {
  Canvas,
  Meta,
  Controls,
  Unstyled,
  Story,
} from "@storybook/addon-docs/blocks"
import { DoDonts } from "@/lib/storybook-utils/do-donts"

import * as ValueDisplayStories from "./ValueDisplay.stories"

<Meta title="ValueDisplay" />

# ValueDisplay

## Introduction

In order to provide an homogeneus experience to the customers and abstract the
render logic to developers, ValueDisplay provices a semantic way to define the
value's display of a property.

The way a value must be rendered is defined in the render `type`

> Note each value display type could have an adapted visualizacion depending on
> the value display type. Ex: Number value display type in a table will be
> rendered as a right aligned text, but in a list it will be rendered aligned to
> the left.

## Value display types

### text

Renders a text This type's render function can be used as a shortcut returning
just a string.

```
type value = string | number | undefined
// or
type value = {
    text: string | number | undefined
    placeholder?: string
}
```

<Canvas
  of={ValueDisplayStories.TextType}
  source={{
    code: `
    render: (item) => 'John Doe'
    `,
  }}
/>

#### TextInputAsObject

<Canvas
  of={ValueDisplayStories.TextInputAsObject}
  source={{
    code: `
render: (item) => ({
    type: 'text',
    value: 'John Doe'
})`,
  }}
/>

#### TextValueInputAsObject

<Canvas
  of={ValueDisplayStories.TextValueInputAsObject}
  source={{
    code: `
render: (item) => ({
    type: 'text',
    value: {
      text: 'John Doe'
    }
})`,
  }}
/>

#### With placeholder

<Canvas
  of={ValueDisplayStories.TextWithPlaceholder}
  source={{
    code: `
render: (item) => ({
    type: 'text'
    value: {
      text: undefined
      placeholder: 'Some placeholder'
    }
})`,
  }}
/>

### longText

Renders long text with ellipsis truncation and tooltip support. Uses the
OneEllipsis component for better cross-browser support and automatic tooltip
functionality.

#### Value type

```
type value = string | number | undefined
// or
type value = {
    text: string | number | undefined
    lines?: number
    tooltip?: boolean
    placeholder?: string
}
```

#### LongTextType

<Canvas
  of={ValueDisplayStories.LongTextType}
  source={{
    code: `
render: (item) => ({
    type: 'longText',
    value: 'This is a very long description that demonstrates the longText cell type functionality. The text will be truncated with ellipsis when it exceeds the specified number of lines, and a tooltip will show the full content when hovering over the truncated text.'
})`,
  }}
/>

#### LongTextWithLines

<Canvas
  of={ValueDisplayStories.LongTextWithLines}
  source={{
    code: `
render: (item) => ({
    type: 'longText',
    value: {
        text: 'This is a very long description that demonstrates the longText cell type with a specific number of lines. The text will be truncated after 2 lines and show an ellipsis. When you hover over the text, a tooltip will display the full content. This is useful for maintaining consistent row heights in tables while still showing more content than a single line would allow.',
        lines: 2
    }
})`,
  }}
/>

#### LongTextWithLinesAndTooltip

<Canvas
  of={ValueDisplayStories.LongTextWithLinesAndTooltip}
  source={{
    code: `
render: (item) => ({
    type: 'longText',
    value: {
        text: 'This is a very long description that demonstrates the longText cell type with a specific number of lines. The text will be truncated after 2 lines and show an ellipsis. When you hover over the text, a tooltip will display the full content. This is useful for maintaining consistent row heights in tables while still showing more content than a single line would allow.',
        lines: 2,
        tooltip: true
    }
})`,
  }}
/>

#### LongTextWithPlaceholder

<Canvas
  of={ValueDisplayStories.LongTextWithPlaceholder}
  source={{
    code: `
render: (item) => ({
    type: 'longText',
    value: {
        text: undefined,
        placeholder: 'No description available'
    }
})`,
  }}
/>

### number

Renders a number (right align on table visualizacion)

> For money use the `amount` type instead

#### Value type

```
type value = number | undefined
// or
type value = {
    number: number | undefined
    placeholder?: string
    units?: string
    unitsPosition?: 'left' | 'right' // default is right
    decimalPlaces?: number | undefined // if undefined, the number will be rendered as is, if defined, the number will be rendered with the number of decimal places
}
```

#### NumberInputAsObject

<Canvas
  of={ValueDisplayStories.NumberInputAsObject}
  source={{
    code: `
render: (item) => ({
    type: 'number',
    value: 1234
})
`,
  }}
/>

#### NumberValueInputAsObject

<Canvas
  of={ValueDisplayStories.NumberValueInputAsObject}
  source={{
    code: `
render: (item) => ({
    type: 'number'
    value: {
      number: 1234
    }
})
`,
  }}
/>

#### With decimal places

<Canvas
  of={ValueDisplayStories.NumberValueInputAsObjectWithDecimals}
  source={{
    code: `
render: (item) => ({
    type: 'number'
    value: {
      number: 1234.56789
      decimalPlaces: 2
    }
})
`,
  }}
/>

#### With units

<Canvas
  of={ValueDisplayStories.NumberValueInputAsObjectWithUnits}
  source={{
    code: `
render: (item) => ({
    type: 'number'
    value: {
      number: 1234
      units: 'km/h',
      decimalPlaces: 2,
    }
})
`,
  }}
/>

#### With placeholder

<Canvas
  of={ValueDisplayStories.NumberWithPlaceholder}
  source={{
    code: `
render: (item) => ({
    type: 'number'
    value: {
      number: undefined,
      placeholder: 'Some placeholder'
    }
})`,
  }}
/>

### date

Renders a date

#### Value type

```
type value = Date | undefined
// or
type value = {
    date: Date | undefined
    placeholder?: string
}
```

#### DateInputAsObject

<Canvas
  of={ValueDisplayStories.DateInputAsObject}
  source={{
    code: `
render: (item) => ({
    type: 'date'
    value: new Date()
})
`,
  }}
/>

#### DateValueInputAsObject

<Canvas
  of={ValueDisplayStories.DateValueInputAsObject}
  source={{
    code: `
render: (item) => ({
    type: 'date'
    value: {
      date: new Date()
    }
})
`,
  }}
/>

#### With placeholder

<Canvas
  of={ValueDisplayStories.DateWithPlaceholder}
  source={{
    code: `
render: (item) => ({
    type: 'date'
    value: {
      date: undefined
      placeholder: 'Some placeholder'
    }
})`,
  }}
/>

### amount

Renders a monetary number (right align on table visualizacion)

#### Value type

```
type value = number | undefined
// or
type value = {
    amount: number | undefined
    placeholder?: string
    currency?: CurrencyDef
}

type CurrencyDef = {
  symbol: string
  symbolPosition?: "left" | "right"
  decimalPlaces: number
}
```

#### AmountInputAsObject

<Canvas
  of={ValueDisplayStories.AmountInputAsObject}
  source={{
    code: `
render: (item) => ({
    type: 'amount'
    value: 1234
})
`,
  }}
/>

#### AmountValueInputAsObject

<Canvas
  of={ValueDisplayStories.AmountValueInputAsObject}
  source={{
    code: `
render: (item) => ({
    type: 'amount'
    value: { amount: 1234 },
})
`,
  }}
/>

#### AmountWithCurrency

<Canvas

of={ValueDisplayStories.AmountWithCurrency} source={{
    code: `
render: (item) => ({
    type: 'amount'
    value: { amount: 1234.56789, currency: { symbol: '$', symbolPosition: 'left', decimalPlaces: 2 } },
  }
})
`,
  }} />

  <Canvas

of={ValueDisplayStories.AmountWithCurrencyEuro} source={{
    code: `
render: (item) => ({
    type: 'amount'
    value: { amount: 1234.56789, currency: { symbol: 'EUR', decimalPlaces: 2 } },
  }
})
`,
  }} />

#### With placeholder

<Canvas
  of={ValueDisplayStories.AmountWithPlaceholder}
  source={{
    code: `
render: (item) => ({
    type: 'text'
    value: {
      amount: undefined
      placeholder: 'Some placeholder'
    }
})`,
  }}
/>

### avatarList

Renders a list of avatars

#### Value type

```
type value = {
    avatarList: AvatarVariant[]
    max?: number // Max avatars to render
    type?: "person" | "team" | "company"
}
```

<Canvas
  of={ValueDisplayStories.AvatarListType}
  source={{
    code: `
render: (item) => ({
    type: 'avatarList'
    value: {
        avatarList: [],
        max: 3
    }
})
`,
  }}
/>

### status

Renders a status tag

#### Value type

```
type value = {
    status: StatusVariant
    label: string
}
```

<Canvas
  of={ValueDisplayStories.StatusType}
  source={{
    code: `
render: (item) => ({
    type: 'status'
    value: {
        status: 'active',
        label: item.name
    }
})
`,
  }}
/>

### person

Renders a person avatar. It supports badge (regular or module) and a tooltip in
the badge. Useful to display information about the member of the badge.

#### Value type

```
type value = {
    firstName: string
    lastName: string
    src?: string // the avatar image
    badge?: AvatarBadge
}

type AvatarBadge = ({
    type: 'module'
    module: ModuleId
} | {
    type: 'badge'
    icon: IconType

}) & {
  tooltip?: string // This is the tooltip for the badge
}
```

<Canvas
  of={ValueDisplayStories.PersonType}
  source={{
    code: `
render: (item) => ({
    type: 'person'
    value: {
        firstName: 'John',
        lastName: 'Doe',
        src: '/pth/to/the/avatar.png'
    }
})
`,
  }}
/>

**With badge and badgetooltip**

<Canvas
  of={ValueDisplayStories.PersonTypeWithBadge}
  meta={ValueDisplayStories}
  source={{
    code: `
render: (item) => ({
    type: 'person'
    value: {
        firstName: 'John',
        lastName: 'Doe',
        src: '/pth/to/the/avatar.png'
        badge: {
            type: 'warning',
            icon: Placeholder
            tooltip: 'This is a tooltip'
        }
    }
})
`,
  }}
/>

**With module badge**

<Canvas
  of={ValueDisplayStories.PersonTypeWithModuleBadge}
  meta={ValueDisplayStories}
  source={{
    code: `
render: (item) => ({
    type: 'person'
    value: {
        firstName: 'John',
        lastName: 'Doe',
        src: '/pth/to/the/avatar.png'
        badge: {
            type: 'module',
            module: 'inbox'
        }
    }
})
`,
  }}
/>

### company

Renders a company avatar. It supports the same badge as the person type (check
it for more details).

#### Value type

```
type value = {
    name: string
    src?: string // the avatar image
    badge?: AvatarBadge
}
// Check PersonType for the AvatarBadge type
```

<Canvas
  of={ValueDisplayStories.CompanyType}
  source={{
    code: `
render: (item) => ({
    type: 'company'
    value: {
        name: 'Factorial'
        src: '/pth/to/the/avatar.png'
    }
})
`,
  }}
/>

### team

Renders a team avatar. It supports the same badge as the person type (check it
for more details).

#### Value type

```
type value = {
    name: string
    src?: string // the avatar image
    badge?: AvatarBadge
}
// Check PersonType for the AvatarBadge type
```

Example:

<Canvas
  of={ValueDisplayStories.TeamType}
  source={{
    code: `
render: (item) => ({
    type: 'team'
    value: {
        name: 'Factorial'
        src: '/pth/to/the/avatar.png'
    }
})
`,
  }}
/>

### tag

Renders a tag

#### Value type

```

type value = { label: string icon?: IconType }

```

<Canvas
  of={ValueDisplayStories.TagType}
  source={{
    code: `
render: (item) => ({
    type: 'tag'
    value: {
        name: 'Factorial'
        src: '/pth/to/the/avatar.png'
    }
})
`,
  }}
/>

### dotTag

Renders a dot tag

#### Value type

```
type value = { label: string, color: NewColor }
```

<Canvas
  of={ValueDisplayStories.DotTagType}
  source={{
    code: `
render: (item) => ({
    type: 'dotTag'
    value: {
        label: 'Engineer',
        color: 'viridian'
    }
})
`,
  }}
/>

### tagList

Renders a list of tags of any type. This provides a unified way to display
multiple tags of the same type with automatic overflow handling.

#### Value type

```
type value = {
  type: TagType,
  tags: Array<TagVariant>,
  max?: number
}
```

<Canvas
  of={ValueDisplayStories.TagArrayType}
  source={{
    code: `
// Example with dot tags
render: (item) => ({
    type: 'tagList',
    value: {
        type: 'dot',
        tags: item.skills.map(skill => ({
            text: skill.label,
            color: skill.color
        })),
        max: 3
    }
})
`,
  }}
/>

### icon

Renders an icon with a label

#### Value type

```
type value = { icon: IconType, label: string }
```

<Canvas
  of={ValueDisplayStories.IconType}
  source={{
    code: `
// Example with dot tags
render: (item) => ({
    type: 'icon',
    value: {
        icon: Placeholder,
        label: 'Icon'
    }
})
`,
  }}
/>

### file

Renders a file avatar (for file type) and file name

#### Value type

```
type FileDef = {
  name: string; // file name
  type: string; // mime type
}

type value = { file: File } | { file: FileDef }
```

<Canvas
  of={ValueDisplayStories.FileType}
  source={{
    code: `
render: (item) => ({
    type: 'file',
    value: {
        file: new File(['file'], 'file.pdf', { type: 'application/pdf' })
        // or 
        file: {
            name: 'file.pdf',
            type: 'application/pdf',
            size: 1000
        }
    }
})
`,
  }}
/>

### folder

Renders a folder with a name

#### Value type

```
type value = { name: string }
```

<Canvas
  of={ValueDisplayStories.FolderType}
  source={{
    code: `
render: (item) => ({
    type: 'file',
    // With File
    value: new File(['file'], 'file.pdf', { type: 'application/pdf' })
    // or with FileDef
    value: {
      name: 'file.pdf',
      type: 'application/pdf',
    } 
  }
})
`,
  }}
/>

### percentage

Renders a percentage with a chart

#### Value type

```
type value = number | undefined
// or
type value = {
    percentage: number | undefined
    label?: string
    placeholder?: string
}
```

#### PercentageInputAsObject

<Canvas
  of={ValueDisplayStories.PercentageInputAsObject}
  source={{
    code: `
render: (item) => ({
    type: 'percentage',
    value: 42
})
`,
  }}
/>

#### PercentageValueInputAsObject

<Canvas
  of={ValueDisplayStories.PercentageValueInputAsObject}
  source={{
    code: `
render: (item) => ({
    type: 'percentage'
    value: {
      percentage: 42
    }
})
`,
  }}
/>

#### With label

<Canvas
  of={ValueDisplayStories.PercentageWithLabel}
  source={{
    code: `
render: (item) => ({
    type: 'percentage'
    value: {
      percentage: 75,
      label: '324 out of 432'
    }
})`,
  }}
/>

#### With placeholder

<Canvas
  of={ValueDisplayStories.PercentageWithPlaceholder}
  source={{
    code: `
render: (item) => ({
    type: 'percentage'
    value: {
      percentage: undefined,
      placeholder: 'There is no data yet'
    }
})`,
  }}
/>
