import{e as _}from"./iframe-CY9Y-e4A.js";import{r as u,R as k}from"./index-B6o7_jwP.js";const{STORY_CHANGED:E,SELECT_STORY:O}=__STORYBOOK_MODULE_CORE_EVENTS__,{makeDecorator:L,addons:h}=__STORYBOOK_MODULE_PREVIEW_API__,{global:T}=__STORYBOOK_MODULE_GLOBAL__;var y="links",{document:c,HTMLElement:C}=T;function R(e){let t={},i=(e[0]==="?"?e.substring(1):e).split("&").filter(Boolean);for(let n=0;n<i.length;n++){let a=i[n].split("=");t[decodeURIComponent(a[0])]=decodeURIComponent(a[1]||"")}return t}var p=e=>h.getChannel().emit(O,e),D=(e,t)=>new Promise(i=>{let{location:n}=c,a=R(n.search).id,s=e||a.split("--",2)[0],o=`/story/${_(s,t)}`,l=n.pathname.replace(/iframe\.html$/,""),f=`${n.origin+l}?${Object.entries({path:o}).map(d=>`${d[0]}=${d[1]}`).join("&")}`;i(f)}),m=e=>{let{target:t}=e;if(!(t instanceof C))return;let i=t,{sbKind:n,sbStory:a}=i.dataset;(n||a)&&(e.preventDefault(),p({kind:n,story:a}))},r=!1,K=()=>{r||(r=!0,c.addEventListener("click",m))},g=()=>{r&&(r=!1,c.removeEventListener("click",m))};L({name:"withLinks",parameterName:y,wrapper:(e,t)=>(K(),h.getChannel().once(E,g),e(t))});var v=0,b=e=>e.button===v&&!e.altKey&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey,S=(e,t=i=>{})=>{b(e)&&(e.preventDefault(),t(e))},U=class extends u.PureComponent{constructor(){super(...arguments),this.state={href:"/"},this.updateHref=async()=>{let{kind:e,title:t=e,story:i,name:n=i}=this.props;if(t&&n){let a=await D(t,n);this.setState({href:a})}},this.handleClick=()=>{let{kind:e,title:t=e,story:i,name:n=i}=this.props;t&&n&&p({title:t,name:n})}}componentDidMount(){this.updateHref()}componentDidUpdate(e){let{kind:t,title:i,story:n,name:a}=this.props;(e.kind!==t||e.story!==n||e.title!==i||e.name!==a)&&this.updateHref()}render(){let{kind:e,title:t=e,story:i,name:n=i,children:a,...s}=this.props,{href:o}=this.state;return k.createElement("a",{href:o,onClick:l=>S(l,this.handleClick),...s},a)}};U.defaultProps={children:void 0};
