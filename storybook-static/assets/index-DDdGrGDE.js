import{j as a}from"./jsx-runtime-Cf8x2fCZ.js";import{I as j}from"./index-CDBnMHOu.js";import"./Save-B3VvXevP.js";import{b as me,c as Ne,d as Ie}from"./Table-BAD0IT6Z.js";import{r as m}from"./index-B6o7_jwP.js";import{d as Pe,c as Ve}from"./index-Bh5LNwUX.js";import{F as Ae}from"./index-CXxsC3ng.js";import{F as ee}from"./Reset-X8BOYMzq.js";import{F as De}from"./Search-DyMYdF6H.js";import{u as J}from"./i18n-provider-DLZYpdh4.js";import{c as I,f as F}from"./utils-B2yEwIwY.js";import{L as Fe}from"./index-C5N-cZbj.js";import{M as Te}from"./index-BKeKnJdY.js";import{A as he}from"./index-Dy8WLFmQ.js";import{m as y}from"./proxy-CqNJYjyK.js";import{B as ge}from"./index-Blak80_u.js";import{F as ze}from"./Sliders-CAPe_jzK.js";import{P as Re,a as Ee,b as ke}from"./popover-BqXImKWO.js";import{C as te,a as ne,b as re,f as ae,g as Oe}from"./card-B_wFt02l.js";import{S as q}from"./skeleton-BQT1AIt_.js";import{O as ye}from"./index-CiVFoefN.js";import{D as qe}from"./index-B79dpo_y.js";import{F as Le}from"./Ellipsis-BFYYAK1r.js";import{O as ie,T as Me,a as oe,b as se,c as $e,d as ce}from"./index-ReJqEmKK.js";const le=({loading:e})=>e?a.jsx(j,{icon:me,className:"animate-spin"}):a.jsx(j,{icon:De,className:"text"}),M=({value:e,onChange:t,loading:n=!1})=>{const[r,o]=m.useState(!1),c=m.useId(),l=m.useRef(null),i=m.useRef(null),s=J(),u=()=>{t(void 0),o(!1),i!=null&&i.current&&(i.current.value="")};Pe(l,()=>{r&&o(!1)});const f=()=>{r||(o(!0),setTimeout(()=>{var p;(p=i.current)==null||p.focus()},0))},d=p=>{r?p.key==="Escape"&&(p.preventDefault(),u(),o(!1)):(p.key==="Enter"||p.key===" ")&&(p.preventDefault(),f())};return a.jsx(Fe,{id:c,children:a.jsx(Te,{transition:{duration:.2,ease:[.175,.885,.32,1.05]},children:a.jsx(he,{children:a.jsx(y.div,{layout:!0,ref:l,className:I("relative flex h-8 w-fit min-w-8 max-w-[180px] items-center justify-center",(r||e)&&"w-[180px]"),children:r?a.jsx(y.div,{layout:!0,layoutId:"search-container",className:"absolute inset-0 h-8 w-full bg-f1-border p-px transition-colors focus-within:bg-f1-border-hover",style:{borderRadius:12},children:a.jsxs(y.div,{layout:!0,className:"relative flex h-full w-full items-center justify-between gap-1 overflow-hidden bg-f1-background pr-1.5",style:{borderRadius:11},children:[a.jsx(y.div,{className:"absolute left-[5px] top-[5px] z-10 flex h-5 w-5 items-center justify-center text-f1-icon",layoutId:"search-icon",children:a.jsx(le,{loading:n},"loading")}),a.jsx(y.input,{layout:!0,ref:i,type:"text",value:e,placeholder:s.actions.search,onChange:p=>t(p.target.value),className:"h-full w-full appearance-none rounded border-none bg-f1-background py-2 pl-7 text-base text-f1-foreground",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onKeyDown:d}),a.jsx(y.div,{tabIndex:0,className:I("flex h-5 w-5 items-center justify-center rounded-full",F()),onClick:p=>{p.stopPropagation(),u()},role:"button","aria-label":s.actions.clear,children:a.jsx(j,{icon:ee,className:"text-f1-icon-secondary transition-colors hover:text-f1-icon",size:"md"})})]})}):a.jsx(y.div,{role:"button","aria-label":s.actions.search,tabIndex:0,layout:!0,layoutId:"search-container",className:I("relative h-8 w-full bg-f1-border p-px transition-colors hover:bg-f1-border-hover",F()),onClick:f,onKeyDown:d,style:{borderRadius:10},children:a.jsxs(y.div,{layout:!0,className:"relative flex h-full w-full items-center gap-1 overflow-hidden bg-f1-background",style:{borderRadius:9},children:[a.jsx(y.div,{className:"absolute left-[5px] top-[5px] flex h-5 w-5 items-center justify-center text-f1-icon-bold",layoutId:"search-icon",children:a.jsx(le,{loading:n})}),e&&a.jsxs("div",{className:"flex h-7 w-full items-center justify-between gap-1.5 overflow-hidden pr-1.5",children:[a.jsx(y.div,{layout:!0,className:"line-clamp-1 overflow-hidden py-2 pl-7",children:e}),a.jsx(y.div,{tabIndex:0,className:I("flex h-5 w-5 items-center justify-center rounded-full",F()),onClick:p=>{p.stopPropagation(),u()},role:"button","aria-label":s.actions.clear,children:a.jsx(j,{icon:ee,className:"text-f1-icon-secondary transition-colors hover:text-f1-icon",size:"md"})})]})]})})})})})})};try{M.displayName="Search",M.__docgenInfo={description:"",displayName:"Search",props:{value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(value: string | undefined) => void"}},loading:{defaultValue:{value:"false"},description:"",name:"loading",required:!1,type:{name:"boolean"}}}}}catch{}const He=(e,t)=>e(t).filter(n=>n.enabled===void 0||n.enabled),z=({item:e,actions:t})=>!t||t.length===0?null:a.jsx(qe,{items:He(t,e),children:a.jsx(ge,{variant:"ghost",icon:Le,label:"Actions",hideLabel:!0})});try{z.displayName="ActionsDropdown",z.__docgenInfo={description:"",displayName:"ActionsDropdown",props:{item:{defaultValue:null,description:"",name:"item",required:!0,type:{name:"RecordType"}},actions:{defaultValue:null,description:"",name:"actions",required:!0,type:{name:"ActionsDefinition<Record>"}}}}}catch{}function Ue(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=Be(e))||t){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Be(e,t){if(e){if(typeof e=="string")return ue(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ue(e,t)}}function ue(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function de(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Q(e,t,n){return t&&de(e.prototype,t),n&&de(e,n),e}var W=function(){return typeof Symbol=="function"},X=function(e){return W()&&!!Symbol[e]},Y=function(e){return X(e)?Symbol[e]:"@@"+e};W()&&!X("observable")&&(Symbol.observable=Symbol("observable"));var Ke=Y("iterator"),$=Y("observable"),be=Y("species");function R(e,t){var n=e[t];if(n!=null){if(typeof n!="function")throw new TypeError(n+" is not a function");return n}}function N(e){var t=e.constructor;return t!==void 0&&(t=t[be],t===null&&(t=void 0)),t!==void 0?t:E}function Ge(e){return e instanceof E}function S(e){S.log?S.log(e):setTimeout(function(){throw e})}function T(e){Promise.resolve().then(function(){try{e()}catch(t){S(t)}})}function xe(e){var t=e._cleanup;if(t!==void 0&&(e._cleanup=void 0,!!t))try{if(typeof t=="function")t();else{var n=R(t,"unsubscribe");n&&n.call(t)}}catch(r){S(r)}}function H(e){e._observer=void 0,e._queue=void 0,e._state="closed"}function Je(e){var t=e._queue;if(t){e._queue=void 0,e._state="ready";for(var n=0;n<t.length&&(ve(e,t[n].type,t[n].value),e._state!=="closed");++n);}}function ve(e,t,n){e._state="running";var r=e._observer;try{var o=R(r,t);switch(t){case"next":o&&o.call(r,n);break;case"error":if(H(e),o)o.call(r,n);else throw n;break;case"complete":H(e),o&&o.call(r);break}}catch(c){S(c)}e._state==="closed"?xe(e):e._state==="running"&&(e._state="ready")}function L(e,t,n){if(e._state!=="closed"){if(e._state==="buffering"){e._queue.push({type:t,value:n});return}if(e._state!=="ready"){e._state="buffering",e._queue=[{type:t,value:n}],T(function(){return Je(e)});return}ve(e,t,n)}}var Qe=function(){function e(n,r){this._cleanup=void 0,this._observer=n,this._queue=void 0,this._state="initializing";var o=new We(this);try{this._cleanup=r.call(void 0,o)}catch(c){o.error(c)}this._state==="initializing"&&(this._state="ready")}var t=e.prototype;return t.unsubscribe=function(){this._state!=="closed"&&(H(this),xe(this))},Q(e,[{key:"closed",get:function(){return this._state==="closed"}}]),e}(),We=function(){function e(n){this._subscription=n}var t=e.prototype;return t.next=function(r){L(this._subscription,"next",r)},t.error=function(r){L(this._subscription,"error",r)},t.complete=function(){L(this._subscription,"complete")},Q(e,[{key:"closed",get:function(){return this._subscription._state==="closed"}}]),e}(),E=function(){function e(n){if(!(this instanceof e))throw new TypeError("Observable cannot be called as a function");if(typeof n!="function")throw new TypeError("Observable initializer must be a function");this._subscriber=n}var t=e.prototype;return t.subscribe=function(r){return(typeof r!="object"||r===null)&&(r={next:r,error:arguments[1],complete:arguments[2]}),new Qe(r,this._subscriber)},t.forEach=function(r){var o=this;return new Promise(function(c,l){if(typeof r!="function"){l(new TypeError(r+" is not a function"));return}function i(){s.unsubscribe(),c()}var s=o.subscribe({next:function(u){try{r(u,i)}catch(f){l(f),s.unsubscribe()}},error:l,complete:c})})},t.map=function(r){var o=this;if(typeof r!="function")throw new TypeError(r+" is not a function");var c=N(this);return new c(function(l){return o.subscribe({next:function(i){try{i=r(i)}catch(s){return l.error(s)}l.next(i)},error:function(i){l.error(i)},complete:function(){l.complete()}})})},t.filter=function(r){var o=this;if(typeof r!="function")throw new TypeError(r+" is not a function");var c=N(this);return new c(function(l){return o.subscribe({next:function(i){try{if(!r(i))return}catch(s){return l.error(s)}l.next(i)},error:function(i){l.error(i)},complete:function(){l.complete()}})})},t.reduce=function(r){var o=this;if(typeof r!="function")throw new TypeError(r+" is not a function");var c=N(this),l=arguments.length>1,i=!1,s=arguments[1],u=s;return new c(function(f){return o.subscribe({next:function(d){var p=!i;if(i=!0,!p||l)try{u=r(u,d)}catch(h){return f.error(h)}else u=d},error:function(d){f.error(d)},complete:function(){if(!i&&!l)return f.error(new TypeError("Cannot reduce an empty sequence"));f.next(u),f.complete()}})})},t.concat=function(){for(var r=this,o=arguments.length,c=new Array(o),l=0;l<o;l++)c[l]=arguments[l];var i=N(this);return new i(function(s){var u,f=0;function d(p){u=p.subscribe({next:function(h){s.next(h)},error:function(h){s.error(h)},complete:function(){f===c.length?(u=void 0,s.complete()):d(i.from(c[f++]))}})}return d(r),function(){u&&(u.unsubscribe(),u=void 0)}})},t.flatMap=function(r){var o=this;if(typeof r!="function")throw new TypeError(r+" is not a function");var c=N(this);return new c(function(l){var i=[],s=o.subscribe({next:function(f){if(r)try{f=r(f)}catch(p){return l.error(p)}var d=c.from(f).subscribe({next:function(p){l.next(p)},error:function(p){l.error(p)},complete:function(){var p=i.indexOf(d);p>=0&&i.splice(p,1),u()}});i.push(d)},error:function(f){l.error(f)},complete:function(){u()}});function u(){s.closed&&i.length===0&&l.complete()}return function(){i.forEach(function(f){return f.unsubscribe()}),s.unsubscribe()}})},t[$]=function(){return this},e.from=function(r){var o=typeof this=="function"?this:e;if(r==null)throw new TypeError(r+" is not an object");var c=R(r,$);if(c){var l=c.call(r);if(Object(l)!==l)throw new TypeError(l+" is not an object");return Ge(l)&&l.constructor===o?l:new o(function(i){return l.subscribe(i)})}if(X("iterator")&&(c=R(r,Ke),c))return new o(function(i){T(function(){if(!i.closed){for(var s=Ue(c.call(r)),u;!(u=s()).done;){var f=u.value;if(i.next(f),i.closed)return}i.complete()}})});if(Array.isArray(r))return new o(function(i){T(function(){if(!i.closed){for(var s=0;s<r.length;++s)if(i.next(r[s]),i.closed)return;i.complete()}})});throw new TypeError(r+" is not observable")},e.of=function(){for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];var l=typeof this=="function"?this:e;return new l(function(i){T(function(){if(!i.closed){for(var s=0;s<o.length;++s)if(i.next(o[s]),i.closed)return;i.complete()}})})},Q(e,null,[{key:be,get:function(){return this}}]),e}();W()&&Object.defineProperty(E,Symbol("extensions"),{value:{symbol:$,hostReportError:S},configurable:!0});function Xe(e){return new E(t=>(t.next({loading:!0,error:null,data:null}),e.then(n=>{t.next({loading:!1,error:null,data:n}),t.complete()}).catch(n=>{t.next({loading:!1,error:n,data:null}),t.complete()}),()=>{}))}function Ye(){const[e,t]=m.useState(!0),[n,r]=m.useState([]),[o,c]=m.useState(null);return{isInitialLoading:e,setIsInitialLoading:t,data:n,setData:r,error:o,setError:c}}function Ze(){const[e,t]=m.useState(null);return{paginationInfo:e,setPaginationInfo:t}}function _e(e,{filters:t}={}){const{dataAdapter:n,currentFilters:r,currentSortings:o,search:c,currentSearch:l,isLoading:i,setIsLoading:s}=e,u=m.useRef(),{isInitialLoading:f,setIsInitialLoading:d,data:p,setData:h,error:v,setError:b}=Ye(),{paginationInfo:x,setPaginationInfo:P}=Ze(),_=m.useMemo(()=>({...r,...t}),[r,t]),k=m.useDeferredValue(l),Z=c!=null&&c.enabled?c!=null&&c.sync?l:k:void 0,O=m.useCallback(g=>{"records"in g?(h(g.records),P({total:g.total,currentPage:g.currentPage,perPage:g.perPage,pagesCount:g.pagesCount})):h(g),b(null),d(!1),s(!1)},[h,b,P,d,s]),V=m.useCallback(g=>{b({message:"Error fetching data",cause:g}),d(!1),s(!1),u.current=void 0},[b,d,s]),A=m.useCallback(async(g,Se=1)=>{try{u.current&&(u.current(),u.current=void 0);const D={filters:g,search:Z,sortings:o},w=n.paginationType==="pages"?n.fetchData({...D,pagination:{currentPage:Se,perPage:n.perPage||20}}):n.fetchData({...D});if(!("then"in w||"subscribe"in w)){O(w);return}const Ce=("subscribe"in w?w:Xe(w)).subscribe({next:C=>{C.loading?s(!0):C.error?V(C.error):C.data&&O(C.data)},error:V,complete:()=>{u.current=void 0}});u.current=()=>Ce.unsubscribe()}catch(D){V(D)}},[V,n,o,Z,O,s]),je=m.useCallback(g=>{(x==null?void 0:x.currentPage)!==g&&(s(!0),A(_,g))},[A,_,s,x]);return m.useEffect(()=>(s(!0),A(_,1),()=>{var g;(g=u.current)==null||g.call(u)}),[A,_,s]),{data:p,isInitialLoading:f,isLoading:i,error:v,paginationInfo:x,setPage:je}}const we=(e,t)=>t.render(e),et=e=>Math.ceil(e/12)*12,U=({cardProperties:e,title:t,source:n})=>{const r=m.useMemo(()=>n.dataAdapter.paginationType==="pages"?{...n,dataAdapter:{...n.dataAdapter,perPage:et(n.dataAdapter.perPage??24)}}:n,[n]),{data:o,paginationInfo:c,setPage:l,isInitialLoading:i}=_e(r);return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:i?Array.from({length:8}).map((s,u)=>a.jsxs(te,{children:[a.jsx(ne,{children:a.jsx(re,{children:a.jsx(q,{className:"h-4 w-3/4"})})}),a.jsx(ae,{className:"space-y-2",children:e.map(f=>a.jsxs("div",{className:"space-y-1",children:[a.jsx(q,{className:"h-3 w-1/4"}),a.jsx(q,{className:"h-3 w-1/2"})]},String(f.label)))})]},u)):o.map((s,u)=>a.jsxs(te,{children:[a.jsx(ne,{children:a.jsx(re,{children:t(s)})}),a.jsx(ae,{className:"space-y-2",children:e.map(f=>a.jsxs("div",{className:"space-y-1",children:[a.jsx("div",{className:"text-muted-foreground text-sm font-medium",children:f.label}),a.jsx("div",{className:"text-sm",children:we(s,f)})]},String(f.label)))}),n.actions&&a.jsx(Oe,{className:"justify-end",children:a.jsx(z,{item:s,actions:n.actions})})]},u))}),c&&a.jsx(ye,{totalPages:c.pagesCount,currentPage:c.currentPage,onPageChange:l})]})};try{U.displayName="CardCollection",U.__docgenInfo={description:"",displayName:"CardCollection",props:{source:{defaultValue:null,description:"The data source configuration and state",name:"source",required:!0,type:{name:"DataSource<Record, Filters, Sortings, Actions>"}},cardProperties:{defaultValue:null,description:"",name:"cardProperties",required:!0,type:{name:"readonly CardPropertyDefinition<Record>[]"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"(record: Record) => string"}}}}}catch{}const B=({columns:e,source:t})=>{const n=J(),{data:r,paginationInfo:o,setPage:c,isInitialLoading:l}=_e(t),{currentSortings:i,setCurrentSortings:s}=t,u=(d,p,h)=>{if(!(!d||!p))return h===null?"none":h.field===d?h.order:"none"},f=d=>{s(()=>!i||i.field!==d?{field:d,order:"asc"}:i.order==="asc"?{field:d,order:"desc"}:null)};return l?a.jsx(ie.Skeleton,{columns:e.length+(t.actions?1:0)}):(t.sortings||e.forEach(d=>{d.sorting&&console.warn("Sorting is defined on a column but no sortings are provided in the data source")}),a.jsxs(a.Fragment,{children:[a.jsxs(ie,{children:[a.jsx(Me,{children:a.jsxs(oe,{children:[e.map(d=>a.jsx(se,{info:d.info,width:d.width,sortState:u(d.sorting,t.sortings,i),onSortClick:d.sorting?()=>{d.sorting&&f(d.sorting)}:void 0,children:d.label},String(d.label))),t.actions&&a.jsx(se,{width:"fit",hidden:!0,children:n.collections.actions.actions},"actions")]})}),a.jsx($e,{children:r.map((d,p)=>{const h=t.itemUrl?t.itemUrl(d):void 0;return a.jsxs(oe,{children:[e.map((v,b)=>a.jsx(ce,{firstCell:b===0,href:h,children:we(d,v)},String(v.label))),t.actions&&a.jsx(ce,{href:h,children:a.jsx(z,{item:d,actions:t.actions})},"actions")]},`row-${p}`)})})]}),o&&a.jsxs("div",{className:"flex w-full items-center justify-between py-3",children:[a.jsx("span",{className:"shrink-0 text-f1-foreground-secondary",children:`${(o.currentPage-1)*o.perPage+1}-${Math.min(o.currentPage*o.perPage,o.total)} ${n.collections.visualizations.pagination.of} ${o.total}`}),a.jsx("div",{className:"flex items-center",children:a.jsx(ye,{totalPages:o.pagesCount,currentPage:o.currentPage,onPageChange:c})})]})]}))};try{B.displayName="TableCollection",B.__docgenInfo={description:"",displayName:"TableCollection",props:{source:{defaultValue:null,description:"The data source configuration and state",name:"source",required:!0,type:{name:"DataSource<Record, Filters, Sortings, Actions>"}},columns:{defaultValue:null,description:"",name:"columns",required:!0,type:{name:"readonly TableColumnDefinition<Record, Sortings>[]"}}}}}catch{}const K=({visualizations:e,currentVisualization:t,onVisualizationChange:n})=>{const r=J(),[o,c]=m.useState(!1),l=i=>{c(!1),n(i)};return a.jsx("div",{className:"flex gap-2",children:a.jsxs(Re,{open:o,children:[a.jsx(Ee,{asChild:!0,onClick:()=>c(!o),children:a.jsx(ge,{variant:"outline",label:"Filters",icon:ze,onClick:()=>{},hideLabel:!0,round:!0})}),a.jsx(ke,{className:"w-[280px] rounded-md border border-solid border-f1-border-secondary p-2",align:"end",children:a.jsx("div",{className:"grid grid-cols-2",children:e.map((i,s)=>{const u=t===s,f=i.type==="custom"?i.icon:i.type==="table"?Ne:Ie,d=i.type==="custom"?i.label:r.collections.visualizations[i.type];return a.jsxs("button",{className:I("flex w-full flex-col items-center justify-center gap-1 rounded-sm p-2 font-medium text-f1-foreground-secondary transition-colors",u&&"bg-f1-background-secondary text-f1-foreground",F()),onClick:()=>l(s),children:[a.jsx(j,{icon:f}),d]},i.type)})})})]})})},G=({visualization:e,source:t})=>{switch(e.type){case"table":return a.jsx(B,{source:t,...e.options});case"card":return a.jsx(U,{source:t,...e.options});case"custom":return e.component({source:t})}};try{K.displayName="VisualizationSelector",K.__docgenInfo={description:`A component that renders a selector for switching between different visualization types.
Provides buttons for each available visualization with appropriate icons.`,displayName:"VisualizationSelector",props:{visualizations:{defaultValue:null,description:"",name:"visualizations",required:!0,type:{name:"readonly Visualization<Record, Filters, Sortings>[]"}},currentVisualization:{defaultValue:null,description:"",name:"currentVisualization",required:!0,type:{name:"number"}},onVisualizationChange:{defaultValue:null,description:"",name:"onVisualizationChange",required:!0,type:{name:"(index: number) => void"}}}}}catch{}try{G.displayName="VisualizationRenderer",G.__docgenInfo={description:`A component that renders the selected visualization for a collection.
Handles switching between different visualization types (table, card, or custom view)
and passes appropriate props to the specific visualization component.`,displayName:"VisualizationRenderer",props:{visualization:{defaultValue:null,description:"",name:"visualization",required:!0,type:{name:"Visualization<Record, Filters, Sortings>"}},source:{defaultValue:null,description:"",name:"source",required:!0,type:{name:"DataSource<Record, Filters, Sortings, Actions>"}}}}}catch{}const fe=({currentFilters:e={},filters:t,search:n,defaultSorting:r,dataAdapter:o,...c},l=[])=>{const[i,s]=m.useState(e),[u,f]=m.useState(r||null),d={sync:!1,...n},[p,h]=m.useState(),[v,b]=Ve(p,200);m.useEffect(()=>{d.sync||b(p)},[p,d.sync,b]);const x=m.useMemo(()=>t,l),[P,_]=m.useState(!1),k=m.useMemo(()=>o,l);return{filters:x,currentFilters:i,setCurrentFilters:s,currentSortings:u,setCurrentSortings:f,search:n,currentSearch:p,setCurrentSearch:h,debouncedCurrentSearch:v,isLoading:P,setIsLoading:_,dataAdapter:k,...c}},tt=y(j),pe=({source:e,visualizations:t})=>{const{filters:n,currentFilters:r,setCurrentFilters:o,search:c,currentSearch:l,setCurrentSearch:i,isLoading:s}=e,[u,f]=m.useState(0);return a.jsxs("div",{className:"flex flex-col gap-4",children:[a.jsxs("div",{className:"flex items-start justify-between",children:[n&&a.jsx(Ae,{schema:n,filters:r,presets:e.presets,onChange:o}),a.jsxs("div",{className:"flex shrink-0 items-center gap-2",children:[a.jsx(he,{initial:!1,children:s&&!c&&a.jsx(tt,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},size:"lg",icon:me,className:"animate-spin"})}),c&&a.jsx(M,{loading:s,onChange:i,value:l}),t&&t.length>1&&a.jsx(K,{visualizations:t,currentVisualization:u,onVisualizationChange:f})]})]}),a.jsx(G,{visualization:t[u],source:e})]})};try{fe.displayName="useDataSource",fe.__docgenInfo={description:`A hook that manages data source state and filtering capabilities for a collection.
It creates and returns a reusable data source that can be shared across different
visualizations and components.

This hook is intentionally separated from the rendering components to:
1. Enable sharing the same data source across multiple components
2. Allow for state management outside the rendering layer
3. Support more complex data filtering, querying, and pagination logic
4. Provide a clean separation between data management and visualization`,displayName:"useDataSource",props:{}}}catch{}try{pe.displayName="DataCollection",pe.__docgenInfo={description:`A component that renders a collection of data with filtering and visualization capabilities.
It consumes a data source (created by useDataSource) and displays it through one or more visualizations.

DataCollection is separated from useDataSource to:
1. Support the composition pattern - data sources can be created and managed independently
2. Allow a single data source to be visualized in multiple ways simultaneously
3. Enable reuse of the same data source in different parts of the application
4. Provide a clean separation of concerns between data management and UI rendering`,displayName:"DataCollection",props:{source:{defaultValue:null,description:"",name:"source",required:!0,type:{name:"DataSource<Record, Filters, Sortings, Actions>"}},visualizations:{defaultValue:null,description:"",name:"visualizations",required:!0,type:{name:"readonly Visualization<Record, Filters, Sortings>[]"}}}}}catch{}export{pe as D,E as O,_e as a,fe as u};
