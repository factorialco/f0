import{j as a}from"./jsx-runtime-Cf8x2fCZ.js";import{I as y}from"./index-CDBnMHOu.js";import"./Save-B3VvXevP.js";import{F as I}from"./ChevronDown-LBI9f9x4.js";import{F}from"./ChevronUp-DDAshzCv.js";import{I as w}from"./input-BTRPgdqa.js";import{r as b}from"./index-B6o7_jwP.js";const q=/^(-?)([0-9]+)?(?:([\.,])([0-9]+)?)?$/;function _(l,{maxDecimals:r}){if(!l||l==="-")return{formattedValue:l??"",value:null};const e=l.match(q);if(!e)return null;let[o,i,u,f,t]=e;r&&((t==null?void 0:t.length)??0)>r?t=t==null?void 0:t.slice(0,r):r===0&&(t=""),u=(u==null?void 0:u.replace(/^0+(\d)/,(p,m)=>m))??"";const c=`${i}${u}${r!==0?`${f??""}${t??""}`:""}`,d=parseFloat(c.replace(",","."));return{formattedValue:c,value:Number.isNaN(d)?null:d}}const h=(l,r,e)=>new Intl.NumberFormat(r,{maximumFractionDigits:e,useGrouping:!1}).format(l),v=b.forwardRef(function({locale:r,value:e,maxDecimals:o,step:i,min:u,max:f,onChange:t,...c},d){const[p,m]=b.useState(()=>e!=null?h(e,r,o):""),N=n=>{const s=_(n,{maxDecimals:o});if(!s)return;const{formattedValue:g,value:j}=s;m(g),t==null||t(j)},V=n=>()=>{if(!i)return;if(e==null)return N(h(i??u??0,r,o));const s=n==="increase"?e+i:e-i;u!=null&&s<u||f!=null&&s>f||N(h(s,r,o))},x=()=>i?a.jsxs("div",{className:"absolute right-2 top-0.5 hidden h-full flex-col group-focus-within:flex group-hover:flex",onClick:n=>n.preventDefault(),children:[a.jsx("div",{onClick:V("increase"),className:"h-4 cursor-pointer",role:"button",children:a.jsx(y,{size:"sm",icon:F})}),a.jsx("div",{onClick:V("decrease"),className:"h-4 cursor-pointer",role:"button",children:a.jsx(y,{size:"sm",icon:I})})]}):null;return b.useEffect(()=>{const n=_(p,{maxDecimals:o});e===void 0||e==(n==null?void 0:n.value)||m(e?h(e,r,o):"")},[p,o,e,r]),a.jsxs("div",{className:"group relative",children:[a.jsx(w,{type:"text",ref:d,value:p,inputMode:"decimal",className:"group-focus-within:pr-5 group-hover:pr-5",onChange:n=>N(n.target.value),...c}),a.jsx(x,{})]})});try{v.displayName="NumberInput",v.__docgenInfo={description:"",displayName:"NumberInput",props:{onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((value: number | null) => void)"}},step:{defaultValue:null,description:"",name:"step",required:!1,type:{name:"number"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"number | null"}},max:{defaultValue:null,description:"",name:"max",required:!1,type:{name:"number"}},min:{defaultValue:null,description:"",name:"min",required:!1,type:{name:"number"}},locale:{defaultValue:null,description:"",name:"locale",required:!0,type:{name:"string"}},maxDecimals:{defaultValue:null,description:"",name:"maxDecimals",required:!1,type:{name:"number"}}}}}catch{}export{v as N};
