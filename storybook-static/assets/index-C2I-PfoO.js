import{j as n}from"./jsx-runtime-Cf8x2fCZ.js";import{I as O}from"./index-CDBnMHOu.js";import"./Save-B3VvXevP.js";import{F as W}from"./ChevronDown-LBI9f9x4.js";import{u as k}from"./i18n-provider-DLZYpdh4.js";import{c as N,f as V}from"./utils-B2yEwIwY.js";import{P as _,a as T,b as S}from"./popover-BqXImKWO.js";import{S as $}from"./skeleton-BQT1AIt_.js";import{r as o}from"./index-B6o7_jwP.js";import{a as q}from"./index-Bh5LNwUX.js";import{m as z}from"./proxy-CqNJYjyK.js";const E=z(O);function L(d,a){const m=o.useRef(null),w=o.useRef(null),p=o.useRef(null),[I,c]=o.useState({visibleItems:[],overflowItems:[]}),[v,j]=o.useState(!1);q({ref:m,onResize:()=>{b()}});const u=o.useCallback((t,r,e)=>r<e-1?t+a:t,[a]),x=o.useCallback(()=>{if(!p.current)return[];const t=p.current.children,r=[];for(let e=0;e<t.length;e++){const l=t[e].getBoundingClientRect().width;r.push(l)}return r},[]),g=o.useCallback(t=>{let r=0;for(let e=0;e<t.length;e++)r+=t[e],r=u(r,e,t.length);return r},[u]),y=o.useCallback((t,r)=>{let e=0,l=0;for(let f=0;f<t.length;f++){const h=l+t[f];if(h>r)break;l=h,l=u(l,f,t.length),e++}return e},[u]),b=o.useCallback(()=>{var s;if(!m.current||d.length===0)return;const t=m.current.clientWidth,r=((s=w.current)==null?void 0:s.offsetWidth)||60,e=x();if(g(e)<=t){c({visibleItems:d,overflowItems:[]});return}const h=t-r-a,i=y(e,h);c(i===0?{visibleItems:[],overflowItems:d}:{visibleItems:d.slice(0,i),overflowItems:d.slice(i)})},[d,a,x,g,y]);return o.useEffect(()=>{b()},[b]),o.useEffect(()=>{j(!0)},[]),{containerRef:m,overflowButtonRef:w,measurementContainerRef:p,visibleItems:I.visibleItems,overflowItems:I.overflowItems,isInitialized:v}}const C=function({items:a,renderListItem:m,renderDropdownItem:w,renderOverflowIndicator:p,className:I="",gap:c=8}){const[v,j]=o.useState(!1),u=k(),x=o.useCallback(i=>{j(i)},[]),{containerRef:g,overflowButtonRef:y,measurementContainerRef:b,visibleItems:t,overflowItems:r,isInitialized:e}=L(a,c),l=o.useMemo(()=>{const i=(s,R)=>n.jsxs("div",{className:N("flex items-center gap-1 rounded py-1.5 pl-3 pr-2 text-base font-medium text-f1-foreground transition-colors hover:bg-f1-background-secondary",R&&"bg-f1-background-secondary"),children:[n.jsxs("span",{children:[s<a.length&&"+",s]}),n.jsx("span",{children:u.actions.more}),n.jsx("div",{className:"flex h-5 w-5 items-center justify-center after:absolute after:h-4 after:w-4 after:rounded-xs after:bg-f1-background-secondary after:content-['']",children:n.jsx(E,{icon:W,initial:{rotate:0},animate:{rotate:R?180:0},size:"xs"})})]});return i.displayName="OverflowIndicator",i},[a.length,u.actions.more]),f=o.useMemo(()=>e?null:a.map((i,s)=>n.jsx($,{className:"h-2 w-20 rounded-md"},`placeholder-${s}`)),[a,e]),h=r.length>0;return n.jsxs("div",{ref:g,className:N("relative flex items-center",I),style:{gap:`${c}px`},children:[n.jsx("div",{ref:b,"aria-hidden":"true",className:"pointer-events-none invisible absolute left-0 top-0 flex opacity-0",style:{gap:`${c}px`},"data-testid":"overflow-measurement-container",children:a.map((i,s)=>n.jsx("div",{"data-testid":"overflow-measurement-item",children:m(i,s,!1)},`measure-${s}`))}),n.jsxs("div",{className:"flex items-center whitespace-nowrap",style:{gap:`${c}px`},"data-testid":"overflow-visible-container",children:[e&&t.map((i,s)=>n.jsx("div",{className:"transition-all duration-150","data-testid":"overflow-visible-item",children:m(i,s,!0)},`item-${s}`)),f]}),h&&n.jsxs(_,{open:v,onOpenChange:x,children:[n.jsx(T,{asChild:!0,children:n.jsx("button",{ref:y,className:N("inline-flex flex-shrink-0 items-center",V()),children:p?p(r.length,v):l(r.length,v)})}),n.jsx(S,{className:"rounded-md border border-solid border-f1-border-secondary p-1 shadow-md",align:"end",children:n.jsx("div",{className:"flex flex-col",children:r.map((i,s)=>n.jsx("div",{children:w(i,s)},`overflow-item-${s}`))})})]})]})};C.displayName="OverflowList";try{C.displayName="OverflowList",C.__docgenInfo={description:"",displayName:"OverflowList",props:{items:{defaultValue:null,description:"",name:"items",required:!0,type:{name:"T[]"}},renderListItem:{defaultValue:null,description:`What to render as a list item (items outside of the overflow list)
@param item - The item to render
@param index - The index of the item
@param isVisible - Whether this item is in the visible list (true) or measurement container (false)`,name:"renderListItem",required:!0,type:{name:"(item: T, index: number, isVisible?: boolean | undefined) => ReactNode"}},renderDropdownItem:{defaultValue:null,description:"What to render as a dropdown item (items inside of the overflow list)",name:"renderDropdownItem",required:!0,type:{name:"(item: T, index: number) => ReactNode"}},renderOverflowIndicator:{defaultValue:null,description:`What to render as the overflow indicator
If not provided, the default overflow indicator will be displayed`,name:"renderOverflowIndicator",required:!1,type:{name:"((count: number, isOpen: boolean) => ReactNode)"}},className:{defaultValue:{value:""},description:"Additional styling for the container",name:"className",required:!1,type:{name:"string"}},gap:{defaultValue:{value:"8"},description:"The gap between items in pixels",name:"gap",required:!1,type:{name:"number"}}}}}catch{}export{C as O};
