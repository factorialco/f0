import{j as a}from"./jsx-runtime-Cf8x2fCZ.js";import{C as p,a as f,b as h,c as g,d as y}from"./chart-23aT_Z91.js";import{a as x}from"./colors-o1uwkeKe.js";import{f as C}from"./forwardRef-CVda-fSC.js";import{P as b,a as j}from"./PieChart-Dtl9OwLu.js";import{C as P,L as _}from"./generateCategoricalChart-DK672pYy.js";const q=({data:s,dataConfig:d,overview:l,aspect:o,tickFormatter:t},m)=>{const i=s.map((e,r)=>{var n;return{...e,fill:((n=d[e.label])==null?void 0:n.color)||x(r)}}),u=s.map(e=>e.value).reduce((e,r)=>e+r);return u===0&&i.push({label:"-",value:1,fill:"hsl(var(--neutral-2))"}),a.jsx(p,{config:d,ref:m,aspect:o,"data-chromatic":"ignore",style:{height:380},children:a.jsxs(b,{accessibilityLayer:!0,margin:{left:0,right:0},children:[u!==0&&a.jsx(f,{cursor:!0,content:a.jsx(h,{yAxisFormatter:t})}),a.jsxs(j,{isAnimationActive:!1,nameKey:"label",legendType:"circle",dataKey:"value",data:i,innerRadius:120,outerRadius:135,paddingAngle:2.5,children:[i.map((e,r)=>{const n=t?t(String(e.value)):e.value;return a.jsx(P,{fill:e.fill,"aria-label":`${e.label}: ${n} (${(e.value/u*100).toFixed(0)}%)`},`cell-${r}`)}),a.jsx(_,{content:({viewBox:e})=>{if(e&&"cx"in e&&"cy"in e)return a.jsxs("text",{x:e.cx,y:e.cy,textAnchor:"middle",dominantBaseline:"middle",children:[a.jsx("tspan",{x:e.cx,y:(e.cy||0)+8,className:"fill-f1-foreground text-4xl font-semibold",children:l!=null&&l.number?t?t(String(l.number)):l.number:null}),a.jsx("tspan",{x:e.cx,y:(e.cy||0)-16,className:"fill-f1-foreground-secondary",children:l==null?void 0:l.label})]})}})]}),a.jsx(g,{content:a.jsx(y,{nameKey:"label",hiddenKey:"-"}),align:"center",verticalAlign:"bottom",layout:"vertical",className:"flex-row items-start gap-4 pr-3 pt-2"})]})})},c=C(q);try{c.displayName="PieChart",c.__docgenInfo={description:"",displayName:"PieChart",props:{dataConfig:{defaultValue:null,description:"",name:"dataConfig",required:!0,type:{name:"ChartConfig"}},data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"PieChartItem[]"}},tickFormatter:{defaultValue:null,description:"",name:"tickFormatter",required:!1,type:{name:"((value: string) => string)"}},overview:{defaultValue:null,description:"",name:"overview",required:!1,type:{name:"{ number: number; label: string; }"}},aspect:{defaultValue:null,description:"",name:"aspect",required:!1,type:{name:"enum",value:[{value:'"small"'},{value:'"square"'},{value:'"wide"'}]}}}}}catch{}export{c as P};
