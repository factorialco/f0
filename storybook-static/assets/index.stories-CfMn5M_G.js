import{j as s}from"./jsx-runtime-Cf8x2fCZ.js";import{w as I,B as q}from"./skeleton-BYaQrqsT.js";import{r as p}from"./index-B6o7_jwP.js";import{W as B}from"./index-DdikQjRD.js";import{A as F}from"./index-CDgHiyp5.js";import G from"./index.stories-CQGnBhGI.js";import{B as J}from"./index-CNWyEi7j.js";import K from"./index.stories-DIbPS6E2.js";import{L as Q,m as X}from"./index.stories-cH3QOrUF.js";import{P as Y,m as U}from"./index.stories-CKEmVs9t.js";import{R as Z,m as ee}from"./index.stories-DBKWyhux.js";import{V as te,m as re}from"./index.stories-Bl9YY0qO.js";var oe=Object.defineProperty,ne=Object.defineProperties,ie=Object.getOwnPropertyDescriptors,y=Object.getOwnPropertySymbols,A=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable,R=(e,t,r)=>t in e?oe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,u=(e,t)=>{for(var r in t||(t={}))A.call(t,r)&&R(e,r,t[r]);if(y)for(var r of y(t))M.call(t,r)&&R(e,r,t[r]);return e},W=(e,t)=>ne(e,ie(t)),se=(e,t)=>{var r={};for(var o in e)A.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&y)for(var o of y(e))t.indexOf(o)<0&&M.call(e,o)&&(r[o]=e[o]);return r},ae=e=>e.right-e.left<5||e.bottom&&e.bottom-e.top<5,le=({spotsList:e,usedSpot:t})=>e.some(r=>r!==t&&t.left===r.left),pe=({position:e,spot:t,stone:r})=>{if(e.left>t.left&&t.right>=e.left&&e.top+r.height>t.top){if(t.bottom&&t.bottom<e.top)return t;let o=u({},t);return o.right=e.left,o}return null},de=({position:e,stone:t,spot:r})=>{if(e.left+t.width>r.left&&e.top>=r.top){if(r.bottom&&r.bottom<e.top||r.right<e.left)return r;let o=u({},r);return o.bottom=e.top,o}return null},ue=({stone:e,position:t,spotsList:r,optimalSpot:o})=>{let n=u({},o);return n.left=t.left+e.width,ae(n)||le({usedSpot:n,spotsList:r})?null:n},me=({spots:e,position:t,optimalSpot:r,stone:o})=>e.map((n,i,a)=>{if(n===r)return ue({stone:o,position:t,optimalSpot:r,spotsList:a});let l=pe({position:t,spot:n,stone:o});return l||de({position:t,stone:o,spot:n})||n});function ce(e,t){for(let r=0,o=t.length;r<o;r++){let n=t[r];if(e(n))return n}return null}var fe=(e,t)=>t.filter(e),he=(e,t)=>[...t].sort(e),ge=(e,t)=>e.top===t.top?e.left<t.left?-1:1:e.top<t.top?-1:1,ve=e=>he(ge,e),be=({availableSpots:e,optimalSpot:t,containerSize:r,stone:o})=>{let n={right:r,top:t.top+o.height,left:t.left};t.bottom&&(n.bottom=t.bottom);for(let i=0,a=e.length;i<a;i+=1){let l=e[i];if(n.left<l.left&&n.top<l.top){n.right=l.left;break}}return n},Se=(e,t)=>{let r=e.right-e.left>=t.width;if(!e.bottom)return r;let o=e.bottom-e.top>=t.height;return r&&o},we=({availableSpots:e,stone:t})=>ce(r=>Se(r,t),e);function ye({stone:e,availableSpots:t,containerSize:r}){let o=we({availableSpots:t,stone:e}),n={left:o.left,top:o.top},i=be({optimalSpot:o,availableSpots:t.filter(d=>d!==o),stone:e,containerSize:r}),a=[...t,i],l=me({spots:a,position:n,optimalSpot:o,stone:e});return a=[...fe(Boolean,l)],a=ve(a),{position:n,availableSpots:a}}var xe=({stones:e,containerSize:t})=>{let r={positions:[],containerHeight:0,availableSpots:[]};if(!e.length)return r;let o=0,n=[],i=[{top:0,left:0,right:t}];for(let a of e){let l=ye({availableSpots:i,stone:a,containerSize:t}),d=l.position.top+a.height;o<d&&(o=d),n.push(l.position),i=l.availableSpots}return{availableSpots:i,positions:n,containerHeight:o}},je=e=>e.reduce((t,r)=>{if(!r)return t;let o=r.getBoundingClientRect();return t.push({width:o.width,height:o.height}),t},[]),We=({boxesRefs:e,wrapperRef:t,children:r,windowWidth:o,wrapperWidth:n})=>{let[{positions:i,containerHeight:a,stones:l,availableSpots:d},m]=p.useState({positions:[],containerHeight:null,stones:[],availableSpots:[]});return p.useEffect(()=>{var c,f;let w=je(e.current),g=(f=(c=t.current)==null?void 0:c.offsetWidth)!=null?f:0;if(g===null)return;let _=xe({stones:w,containerSize:g});m(W(u({},_),{stones:w}))},[r,e,t,o,n]),{positions:i,containerHeight:a,stones:l,availableSpots:d}},_e=e=>({fade:`${e}ms opacity ease`,fadeMove:`
    ${e}ms opacity ease,
    ${e}ms top ease,
    ${e}ms left ease
  `,move:`
    ${e}ms top ease,
    ${e}ms left ease
  `}),De=({transition:e,transitionDuration:t})=>e?{transition:_e(t)[e]}:null,Re=e=>e?W(u({},e),{opacity:1}):{opacity:0,top:0,left:0},Oe=({style:e,position:t,transition:r,transitionDuration:o})=>u(u(W(u({},e),{position:"absolute"}),Re(t)),De({transition:r,transitionDuration:o}));function ze(e,t,r){let o;return function(...n){o&&clearTimeout(o),o=setTimeout(function(){o=null,e.apply(null,n)},t)}}var Ee=()=>{let[e,t]=p.useState(),r=p.useRef(ze(t,300));return p.useEffect(()=>{let o=()=>{r.current(window.innerWidth)};return window.addEventListener("resize",o),()=>{window.removeEventListener("resize",o)}},[]),e},$e=e=>{let[t,r]=p.useState(null);return p.useEffect(()=>{let o=new ResizeObserver(n=>{for(let i of n)r(i.contentRect.width)});return e.current&&o.observe(e.current),()=>{o.disconnect()}},[e]),t},Le=e=>{var t=e,{children:r,style:o,transition:n=!1,transitionDuration:i=500,transitionStep:a=50}=t,l=se(t,["children","style","transition","transitionDuration","transitionStep"]);let d=p.useRef([]),m=p.useRef(null),c=Ee(),f=$e(m),{positions:w,containerHeight:g}=We({boxesRefs:d,wrapperRef:m,children:r,windowWidth:c,wrapperWidth:f}),_=u({minHeight:g??0,position:"relative"},o);return s.jsx("div",W(u({ref:m,style:_},l),{children:p.Children.map(r,(h,D)=>{if(typeof h!="object"||!h||!("type"in h))return h;let T={style:Oe({style:h.props.style,position:w[D],transition:n,transitionDuration:i}),ref:V=>d.current[D]=V};return p.cloneElement(h,u(u({},h.props),T))})}))};const Ce={sm:340,md:480,lg:640},O=p.forwardRef(function({children:t,widgetWidth:r="sm"},o){const n=Ce[r],[i,a]=p.useState(),l=p.Children.toArray(t),d=p.useRef(null);return p.useEffect(()=>{const m=()=>{var f;const c=(f=d.current)==null?void 0:f.offsetWidth;c&&a(Math.floor(c/n)||1)};return m(),window.addEventListener("resize",m),()=>{window.removeEventListener("resize",m)}},[a,n]),s.jsx("div",{ref:o,className:"text-f1-foreground",children:s.jsx("div",{ref:d,children:i===1?s.jsx("div",{className:"flex flex-col gap-4 *:shadow",children:t}):i&&i>1&&s.jsx("div",{className:"relative -mr-4",children:s.jsx(Le,{children:l.map((m,c)=>s.jsx("div",{style:{width:`${Math.floor(1/i*1e4)/100-.05}%`},className:"pb-[0.01px] pr-4 *:mb-4 *:shadow",children:m},c))},i)})})})}),Ne=["sm","lg","md","md","lg","sm","lg","lg","sm","sm","md","md"],x=I(O,()=>s.jsx(q,{children:s.jsx(O,{children:Ne.map((e,t)=>s.jsx(B.Skeleton,{height:e},t))})}));try{x.displayName="Dashboard",x.__docgenInfo={description:"",displayName:"Dashboard",props:{widgetWidth:{defaultValue:{value:"sm"},description:"",name:"widgetWidth",required:!1,type:{name:"enum",value:[{value:'"lg"'},{value:'"md"'},{value:'"sm"'}]}}}}}catch{}const j=[s.jsx(F,{...G.args}),s.jsx(B,{header:{title:"A form widget"},children:s.jsx("p",{children:"Never gonna give you up. Never gonna let you down. Never gonna turn around and desert you."})}),s.jsx(Q,{...X.args}),s.jsx(J,{...K.args}),s.jsx(Y,{...U.args}),s.jsx(te,{...re.args}),s.jsx(Z,{...ee.args})],Pe={title:"Widgets/Layout/Dashboard",component:x,tags:["autodocs","experimental"],argTypes:{widgetWidth:{control:"select",options:[void 0,"sm","md","lg"]}},args:{widgetWidth:"sm",children:Array.from({length:20},(e,t)=>j[t%j.length])},parameters:{a11y:{config:{rules:[{id:"svg-img-alt",enabled:!1}]}}}},v={},b={render(){return s.jsx(x.Skeleton,{})}},S={args:{children:Array.from({length:4},(e,t)=>j[t%j.length])}};var z,E,$;v.parameters={...v.parameters,docs:{...(z=v.parameters)==null?void 0:z.docs,source:{originalSource:"{}",...($=(E=v.parameters)==null?void 0:E.docs)==null?void 0:$.source}}};var L,C,N;b.parameters={...b.parameters,docs:{...(L=b.parameters)==null?void 0:L.docs,source:{originalSource:`{
  render() {
    return <Dashboard.Skeleton />;
  }
}`,...(N=(C=b.parameters)==null?void 0:C.docs)==null?void 0:N.source}}};var P,k,H;S.parameters={...S.parameters,docs:{...(P=S.parameters)==null?void 0:P.docs,source:{originalSource:`{
  args: {
    children: Array.from({
      length: 4
    }, (_, i) => widgets[i % widgets.length])
  }
}`,...(H=(k=S.parameters)==null?void 0:k.docs)==null?void 0:H.source}}};const ke=["Default","Skeleton","Small"],Qe=Object.freeze(Object.defineProperty({__proto__:null,Default:v,Skeleton:b,Small:S,__namedExportsOrder:ke,default:Pe},Symbol.toStringTag,{value:"Module"}));export{x as D,S,b as a,Qe as i,Pe as m};
